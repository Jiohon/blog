{"version":3,"file":"component---src-templates-category-jsx-4c18003f4b903794bd16.js","mappings":"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","sources":["webpack://hushes/./src/components/Hero.jsx","webpack://hushes/./src/components/Post.jsx","webpack://hushes/./src/components/Posts.jsx","webpack://hushes/./src/components/BlogSidebar.jsx","webpack://hushes/./src/hooks/useGetTaxonomies.js","webpack://hushes/./src/components/SidebarLayout.jsx","webpack://hushes/./src/templates/category.jsx"],"sourcesContent":["import React from 'react'\n\n/**\n * @description 大标题\n */\n\nexport const Hero = ({ highlight, subTitle, title, children, index }) => {\n  return (\n    <header className={`hero ${index ? 'index' : ''}`}>\n      {subTitle && (\n        <div className=\"sub-title\">\n          {highlight && <span className=\"highlight\">{highlight}</span>}\n          {subTitle}\n        </div>\n      )}\n      {title && <h1>{title}</h1>}\n      {children && children}\n    </header>\n  )\n}\n","import React from 'react'\nimport { Link } from 'gatsby'\n\n/**\n * @description 文章组件-item\n */\n\nexport const Post = ({ node, prefix }) => {\n  let formattedDate\n\n  if (node.date) {\n    const dateArr = node.date.split(' ')\n    dateArr.pop()\n\n    dateArr[0] = dateArr[0].slice(0, 3)\n    formattedDate = dateArr.join(' ').slice(0, -1)\n  }\n\n  return (\n    <Link to={prefix ? `/${prefix}${node.slug}` : node.slug} key={node.id} className=\"post\">\n      <h5>{node.title}</h5>\n      <time>{formattedDate}</time>\n    </Link>\n  )\n}\n","import React, { useMemo } from 'react'\n\nimport { Post } from './Post'\n\n/**\n * @description 文章列表\n */\n\nexport const Posts = ({ data = [], showYears, query, prefix, hideDate, yearOnly }) => {\n  const postsByYear = useMemo(() => {\n    const collection = {}\n\n    data.forEach((post) => {\n      const year = post.date?.split(', ')[1]\n\n      collection[year] = [...(collection[year] || []), post]\n    })\n\n    return collection\n  }, [data])\n  const years = useMemo(() => Object.keys(postsByYear).reverse(), [postsByYear])\n\n  if (showYears) {\n    return years.map((year) => (\n      <section key={year} className=\"segment\">\n        <h2 className=\"year\">{year}</h2>\n        <div className=\"posts\">\n          {postsByYear[year].map((node) => (\n            <Post key={node.id} node={node} query={query} prefix={prefix} />\n          ))}\n        </div>\n      </section>\n    ))\n  } else {\n    return (\n      <section className=\"segment\">\n        <div className=\"posts\">\n          {data.map((node) => (\n            <Post key={node.id} node={node} query={query} prefix={prefix} hideDate={hideDate} yearOnly={yearOnly} />\n          ))}\n        </div>\n      </section>\n    )\n  }\n}\n","import React from 'react'\nimport { Link } from 'gatsby'\n\nimport { slugify } from '../utils/helpers'\nimport { useGetTaxonomies } from '../hooks/useGetTaxonomies'\n\n/**\n * @description 归档页面 - 侧边类别、标签信息\n */\n\nexport const BlogSidebar = () => {\n  const data = useGetTaxonomies()\n  const categories = data.categories.group\n  const tags = data.tags.group\n\n  return (\n    <aside className=\"post-sidebar\">\n      <div className=\"post-sidebar-card\">\n        <h2>类别</h2>\n        <div className=\"list\">\n          {categories\n            .filter((category) => category.name !== 'Highlight')\n            .map((category) => {\n              return (\n                <Link\n                  key={category.name}\n                  to={`/categories/${slugify(category.name)}`}\n                  className=\"category\"\n                  activeClassName=\"active\"\n                >\n                  <div className=\"name\">{category.name}</div>\n                  <div className=\"count\">{category.totalCount}</div>\n                </Link>\n              )\n            })}\n        </div>\n      </div>\n\n      <div className=\"post-sidebar-card\">\n        <h2>标签</h2>\n        <div className=\"tags\">\n          {tags.map((tag) => {\n            return (\n              <Link key={tag.name} to={`/tags/${slugify(tag.name)}`} className=\"tag\" activeClassName=\"active\">\n                {tag.name}\n              </Link>\n            )\n          })}\n        </div>\n      </div>\n    </aside>\n  )\n}\n","import { useStaticQuery, graphql } from 'gatsby'\n\nexport const useGetTaxonomies = () => {\n  const data = useStaticQuery(graphql`\n    query TaxonomyQuery {\n      tags: allMarkdownRemark {\n        group(field: frontmatter___tags) {\n          name: fieldValue\n          totalCount\n        }\n      }\n\n      categories: allMarkdownRemark {\n        group(field: frontmatter___categories) {\n          name: fieldValue\n          totalCount\n        }\n      }\n    }\n  `)\n\n  return data\n}\n","import React from 'react'\n\nimport { BlogSidebar } from './BlogSidebar'\n\n/**\n * @description 归档页面 - 布局\n */\n\nexport const SidebarLayout = ({ children }) => {\n  return (\n    <section className=\"container markdown-content\">\n      <div className=\"grid\">\n        <div className=\"article-content\">{children}</div>\n        <div className=\"sidebar-content\">\n          <BlogSidebar />\n        </div>\n      </div>\n    </section>\n  )\n}\n","import React, { useMemo } from 'react'\nimport { graphql } from 'gatsby'\nimport Helmet from 'react-helmet'\n\nimport { Layout } from '../layout/index'\nimport { SEO } from '../components/SEO'\nimport { Posts } from '../components/Posts'\nimport { Hero } from '../components/Hero'\nimport { SidebarLayout } from '../components/SidebarLayout'\nimport { getSimplifiedPosts } from '../utils/helpers'\nimport config from '../utils/config'\n\n/**\n * @description 类别 页面\n * @date 09/10/2022\n * @export\n * @param {*} { data, pageContext }\n * @return {*}\n */\nexport default function CategoryTemplate({ data, pageContext }) {\n  let { category } = pageContext\n  const { totalCount } = data.allMarkdownRemark\n  const posts = data.allMarkdownRemark.edges\n  const simplifiedPosts = useMemo(() => getSimplifiedPosts(posts), [posts])\n  const message = totalCount === 1 ? ' post categorized as:' : ' posts categorized as:'\n\n  return (\n    <div>\n      <Helmet title={`${category} | ${config.siteTitle}`} />\n      <SEO />\n\n      <SidebarLayout>\n        <Hero highlight={totalCount} subTitle={message} title={category} />\n        <Posts data={simplifiedPosts} showYears />\n      </SidebarLayout>\n    </div>\n  )\n}\n\nCategoryTemplate.Layout = Layout\n\nexport const pageQuery = graphql`\n  query CategoryPage($category: String) {\n    allMarkdownRemark(\n      sort: { order: DESC, fields: [frontmatter___date] }\n      filter: { frontmatter: { categories: { in: [$category] } } }\n    ) {\n      totalCount\n      edges {\n        node {\n          id\n          fields {\n            slug\n          }\n          frontmatter {\n            title\n            date(formatString: \"MMMM DD, YYYY\")\n            tags\n            categories\n          }\n        }\n      }\n    }\n  }\n`\n"],"names":["Hero","highlight","subTitle","title","children","index","className","Post","formattedDate","node","prefix","date","dateArr","split","pop","slice","join","Link","to","slug","key","id","Posts","data","showYears","query","hideDate","yearOnly","postsByYear","useMemo","collection","forEach","post","year","years","Object","keys","reverse","map","BlogSidebar","useStaticQuery","categories","group","tags","filter","category","name","slugify","activeClassName","totalCount","tag","SidebarLayout","CategoryTemplate","pageContext","allMarkdownRemark","posts","edges","simplifiedPosts","getSimplifiedPosts","message","config","Layout"],"sourceRoot":""}